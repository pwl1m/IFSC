import pytest
from carrinho_compras import CarrinhoDeCompras
from carteira_cliente import CarteiraCliente

@pytest.fixture
def carteira_cliente():
    return CarteiraCliente("12345", 100.0)

@pytest.fixture
def carrinho_compras(carteira_cliente: CarteiraCliente):
    return CarrinhoDeCompras(carteira_cliente)

def test_adicionar_compra(carrinho_compras):
    carrinho_compras.adicionar_compra('mini')
    carrinho_compras.adicionar_compra('major')
    carrinho_compras.adicionar_compra('mega')

    assert carrinho_compras.compras == ['mini', 'major', 'mega']

def test_calcular_total(carrinho_compras):
    carrinho_compras.adicionar_compra('mini')
    carrinho_compras.adicionar_compra('major')
    carrinho_compras.adicionar_compra('mega')

    assert carrinho_compras.calcular_total() == 160  # Valor total esperado

def test_realizar_compra_saldo_suficiente(carrinho_compras):
    carrinho_compras.adicionar_compra('mini')
    carrinho_compras.adicionar_compra('major')

    saldo_atualizado = carrinho_compras.realizar_compra()

    assert saldo_atualizado == 90.0  # Saldo atualizado esperado
